import{u as v,r as d,j as e,H as f,a as n}from"./app-B7AgaNcp.js";import{A as w}from"./app-layout-D2k-cKV3.js";import{S,T as b}from"./trash-DmqrvUvO.js";import{F as j}from"./file-pen-BEaWvdVX.js";import"./app-DkF1CkXt.js";import"./app-logo-icon-B7mWcwk5.js";import"./index-DCvqtYeY.js";import"./index-BLPl0KGT.js";const k=[{title:"Appointment",href:"/appointment"}];function P(){const{appointments:i}=v().props,[g,o]=d.useState(!1),[r,l]=d.useState(null),[c,x]=d.useState(!1),[a,m]=d.useState(null),p=s=>{l({...s}),o(!0)},h=()=>{o(!1),l(null)},u=s=>{window.confirm("Are you sure you want to delete this appointment?")&&(m(s),n.delete(`/appointment/delete/${s}`,{preserveScroll:!0,onFinish:()=>m(null),onError:t=>{console.error(t),window.alert("Failed to delete appointment.")},onSuccess:()=>{n.visit(window.location.href,{only:["appointments"],preserveScroll:!0})}}))},N=s=>{if(s.preventDefault(),!r)return;x(!0);const t=`/appointments/${r.id}`;n.put(t,{service:r.service,duration:r.duration,attendence_status:r.attendence_status,appointment_time:r.appointment_time,status:r.status,notes:r.notes,client_id:r.client_id},{preserveScroll:!0,preserveState:!0,onFinish:()=>x(!1),onSuccess:h,onError:y=>{console.error(y)}})};return e.jsxs(w,{breadcrumbs:k,children:[e.jsx(f,{title:"Appointment"}),e.jsxs("div",{className:"p-2 m-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Scheduled Appointments"}),e.jsxs("form",{action:"",method:"get",className:"mb-4 flex flex-col sm:flex-row",children:[e.jsx("input",{type:"text",placeholder:"Search by name, phone, email",className:"border p-2 px-4 flex-1 rounded-lg mb-2 sm:mb-0 sm:mr-2",name:"q"}),e.jsxs("button",{type:"submit",className:"border flex justify-center items-center rounded-lg p-2 bg-pink-600 text-white",children:[e.jsx(S,{className:"mr-1"})," ",e.jsx("span",{children:"Search"})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"hidden lg:table min-w-full border-gray-300 rounded-lg shadow-lg text-sm text-left",children:[e.jsx("thead",{className:"text-gray-900 uppercase bg-pink-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Id"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Name"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Phone"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Service"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Time"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Status"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Reminder"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Actions"})]})}),e.jsx("tbody",{children:i.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.id}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.client?.name}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.client?.phone}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.service}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.appointment_time}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.status}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.reminder_sent}),e.jsxs("td",{className:"px-3 lg:px-6 py-4 border-b flex items-center",children:[e.jsx(j,{className:"text-amber-500 hover:text-amber-600 hover:cursor-pointer",onClick:()=>p(s)}),e.jsx("button",{type:"button",className:`ml-3 ${a===s.id?"opacity-50 cursor-not-allowed":"hover:cursor-pointer"}`,onClick:()=>u(s.id),disabled:a===s.id,children:e.jsx(b,{className:"text-red-500 hover:text-red-600"})})]})]},s.id))})]}),e.jsx("div",{className:"space-y-4 lg:hidden",children:i.data.map(s=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 border rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"ID"}),e.jsx("span",{className:"font-medium",children:s.id})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Name"}),e.jsx("span",{children:s.client?.name})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Phone"}),e.jsx("span",{children:s.client?.phone})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Service"}),e.jsx("span",{children:s.service})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Time"}),e.jsx("span",{children:s.appointment_time})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Status"}),e.jsx("span",{children:s.status})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Reminder"}),e.jsx("span",{children:s.reminder_sent})]}),e.jsxs("div",{className:"flex justify-end mt-3",children:[e.jsx(j,{className:"text-amber-500 hover:text-amber-600 hover:cursor-pointer mr-3",onClick:()=>p(s)}),e.jsx("button",{type:"button",className:`${a===s.id?"opacity-50 cursor-not-allowed":"hover:cursor-pointer"}`,onClick:()=>u(s.id),disabled:a===s.id,children:e.jsx(b,{className:"text-red-500 hover:text-red-600"})})]})]},s.id))})]}),e.jsx("div",{className:"flex flex-wrap justify-center mt-6 space-x-2",children:i.links.map((s,t)=>e.jsx("button",{disabled:!s.url,dangerouslySetInnerHTML:{__html:s.label},onClick:()=>s.url&&n.visit(s.url),className:`px-3 py-1 border rounded mb-2
            ${s.active?"bg-pink-600 text-white":"bg-white text-pink-600"}
            ${s.url?"hover:cursor-pointer":"opacity-50 cursor-not-allowed"}`},t))}),g&&r&&e.jsx("div",{className:"fixed inset-0 bg-gray-700/20 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-sky-100 dark:bg-gray-800 dark:border-gray-100 w-full max-w-[95%] sm:max-w-[30rem] p-6 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Appointment"}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Service"}),e.jsx("input",{type:"text",className:"border p-2 rounded-lg w-full dark:border-gray-300",value:r.service,onChange:s=>l({...r,service:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Duration"}),e.jsx("input",{type:"number",className:"border p-2 rounded-lg w-full dark:border-gray-300",value:r.duration,onChange:s=>l({...r,duration:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Attendance Status"}),e.jsxs("select",{className:"border p-2 rounded-lg w-full dark:border-gray-300",value:r.attendence_status,onChange:s=>l({...r,attendence_status:s.target.value}),children:[e.jsx("option",{value:"Confirmed",children:"Confirmed"}),e.jsx("option",{value:"Canceled",children:"Canceled"}),e.jsx("option",{value:"Scheduled",children:"Scheduled"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Appointment Time"}),e.jsx("input",{type:"datetime-local",className:"border p-2 rounded-lg w-full dark:border-gray-300",value:r.appointment_time,onChange:s=>l({...r,appointment_time:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Status"}),e.jsx("input",{type:"text",className:"border p-2 rounded-lg w-full dark:border-gray-300",value:r.status,onChange:s=>l({...r,status:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Notes"}),e.jsx("textarea",{className:"border p-2 rounded-lg w-full dark:border-gray-300",value:r.notes??"",onChange:s=>l({...r,notes:s.target.value})})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700 ",children:"Client"}),e.jsx("div",{className:"mt-1 ",children:r.client?.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700",children:"Phone"}),e.jsx("div",{className:"mt-1",children:r.client?.phone})]})]}),e.jsxs("div",{className:"flex justify-end flex-wrap",children:[e.jsx("button",{type:"button",className:"mr-2 mb-2 border px-4 py-2 rounded-lg text-gray-600",onClick:h,disabled:c,children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg disabled:opacity-60",disabled:c,children:c?"Savingâ€¦":"Save Changes"})]})]})]})})]})]})}export{P as default};
