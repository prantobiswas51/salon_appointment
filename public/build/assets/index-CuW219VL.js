import{u as v,r as l,j as e,H as y,a as n}from"./app-DrS9QgZV.js";import{A as g}from"./app-layout-7VJehgU-.js";import{S as f,T as S}from"./trash-B8OSEmZB.js";import{F as w}from"./file-pen-C96tuWH2.js";import"./app-CQF956p7.js";import"./app-logo-icon-Ct6FUKA3.js";import"./index-BdD456Wj.js";import"./index-Dk68SLl-.js";const C=[{title:"Appointment",href:"/appointment"}];function $(){const{appointments:c}=v().props,[u,o]=l.useState(!1),[t,r]=l.useState(null),[d,m]=l.useState(!1),[i,x]=l.useState(null),h=s=>{r({...s}),o(!0)},p=()=>{o(!1),r(null)},b=s=>{window.confirm("Are you sure you want to delete this appointment?")&&(x(s),n.delete(`/appointment/delete/${s}`,{preserveScroll:!0,onFinish:()=>x(null),onError:a=>{console.error(a),window.alert("Failed to delete appointment.")},onSuccess:()=>{n.visit(window.location.href,{only:["appointments"],preserveScroll:!0})}}))},j=s=>{if(s.preventDefault(),!t)return;m(!0);const a=`/appointments/${t.id}`;n.put(a,{service:t.service,duration:t.duration,attendence_status:t.attendence_status,appointment_time:t.appointment_time,status:t.status,notes:t.notes,client_id:t.client_id},{preserveScroll:!0,preserveState:!0,onFinish:()=>m(!1),onSuccess:p,onError:N=>{console.error(N)}})};return e.jsxs(g,{breadcrumbs:C,children:[e.jsx(y,{title:"Appointment"}),e.jsxs("div",{className:"p-2 m-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Scheduled Appointments"}),e.jsxs("form",{action:"",method:"get",className:"mb-4 flex",children:[e.jsx("input",{type:"text",placeholder:"Search by name, phone, email",className:"border p-2 px-4 min-w-lg rounded-md",name:"q"}),e.jsxs("button",{type:"submit",className:"border flex rounded-md ml-2 p-2 bg-pink-600 text-white",children:[e.jsx(f,{})," ",e.jsx("span",{className:"ml-1",children:"Search"})]})]}),e.jsxs("table",{className:"w-full border-gray-300 rounded-lg shadow-md text-sm text-left",children:[e.jsx("thead",{className:"text-gray-900 uppercase rounded-md bg-pink-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 border-b p-2",children:"Id"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Name"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Service"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Time"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Status"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Reminder sent at"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Actions"})]})}),e.jsx("tbody",{children:c.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-6 py-4 border-b",children:s.id}),e.jsx("td",{className:"px-6 py-4 border-b",children:s.client?.name}),e.jsx("td",{className:"px-6 py-4 border-b",children:s.client?.phone}),e.jsx("td",{className:"px-6 py-4 border-b",children:s.service}),e.jsx("td",{className:"px-6 py-4 border-b",children:s.appointment_time}),e.jsx("td",{className:"px-6 py-4 border-b",children:s.status}),e.jsx("td",{className:"px-6 py-4 border-b",children:s.reminder_sent}),e.jsxs("td",{className:"px-6 py-4 border-b flex items-center",children:[e.jsx(w,{className:"text-amber-500 hover:text-amber-600 hover:cursor-pointer",onClick:()=>h(s)}),e.jsx("button",{type:"button","aria-label":"Delete appointment",className:`ml-3 ${i===s.id?"opacity-50 cursor-not-allowed":"hover:cursor-pointer"}`,onClick:()=>b(s.id),disabled:i===s.id,title:i===s.id?"Deleting…":"Delete",children:e.jsx(S,{className:"text-red-500 hover:text-red-600"})})]})]},s.id))})]}),e.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:c.links.map((s,a)=>e.jsx("button",{disabled:!s.url,dangerouslySetInnerHTML:{__html:s.label},onClick:()=>s.url&&n.visit(s.url),className:`px-3 py-1 border rounded
                ${s.active?"bg-pink-600 text-white":"bg-white text-pink-600"}
                ${s.url?"hover:cursor-pointer":"opacity-50 cursor-not-allowed"}`},a))}),u&&t&&e.jsx("div",{className:"fixed inset-0 bg-gray-700/20 bg-opacity-50 flex justify-center items-center",children:e.jsxs("div",{className:"bg-sky-100 min-w-xl p-6 rounded-md shadow-lg w-[30rem]",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Appointment"}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Service"}),e.jsx("input",{type:"text",className:"border p-2 rounded-md w-full",value:t.service,onChange:s=>r({...t,service:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Duration"}),e.jsx("input",{type:"text",className:"border p-2 rounded-md w-full",value:t.duration,onChange:s=>r({...t,duration:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Attendance Status"}),e.jsxs("select",{className:"border p-2 rounded-md w-full",value:t.attendence_status,onChange:s=>r({...t,attendence_status:s.target.value}),children:[e.jsx("option",{value:"Confirmed",children:"Confirmed"}),e.jsx("option",{value:"Canceled",children:"Canceled"}),e.jsx("option",{value:"Scheduled",children:"Scheduled"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Appointment Time"}),e.jsx("input",{type:"text",className:"border p-2 rounded-md w-full",value:t.appointment_time,onChange:s=>r({...t,appointment_time:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Status"}),e.jsx("input",{type:"text",className:"border p-2 rounded-md w-full",value:t.status,onChange:s=>r({...t,status:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Notes"}),e.jsx("textarea",{className:"border p-2 rounded-md w-full",value:t.notes??"",onChange:s=>r({...t,notes:s.target.value})})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700",children:"Client"}),e.jsx("div",{className:"mt-1",children:t.client?.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700",children:"Phone"}),e.jsx("div",{className:"mt-1",children:t.client?.phone})]})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",className:"mr-2 border px-4 py-2 rounded-md text-gray-600",onClick:p,disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md disabled:opacity-60",disabled:d,children:d?"Saving…":"Save Changes"})]})]})]})})]})]})}export{$ as default};
