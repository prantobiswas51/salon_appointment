import{r as p,j as e,U as N,u as w,b as _,H as C}from"./app-CPDtlCfQ.js";import{A as y}from"./app-layout-BTHkIBrh.js";import"./app-CmZPw3tC.js";import"./app-logo-icon-GUfNDyyy.js";import"./index-CLUkAZeV.js";import"./index-BVPaXuGE.js";const k=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function u(n){return n.toString().padStart(2,"0")}function S(n){return`${n.getFullYear()}-${u(n.getMonth()+1)}-${u(n.getDate())}T${u(n.getHours())}:${u(n.getMinutes())}`}function D(n){const l=new Date(n);return l.setHours(0,0,0,0),l}function f(n,l){const d=new Date(n);return d.setDate(d.getDate()+l),d}function $(n,l){const m=(n.getDay()-l+7)%7;return D(f(n,-m))}function A({value:n,onChange:l,weekStartsOn:d=0,slotMinutes:m=30,hoursRange:a={start:0,end:24}}){const i=p.useMemo(()=>{const t=n?new Date(n):new Date;return $(t,d)},[n,d]),h=p.useMemo(()=>Array.from({length:7},(t,c)=>f(i,c)),[i]),g=p.useMemo(()=>{const t=[];for(let c=a.start;c<a.end;c++)for(let o=0;o<60;o+=m)t.push({hour:c,minute:o});return t},[m,a]),s=n?new Date(n):null,b=(t,c,o)=>{const x=new Date(t);x.setHours(c,o,0,0),l(S(x))},r=(t,c,o)=>s?s.getFullYear()===t.getFullYear()&&s.getMonth()===t.getMonth()&&s.getDate()===t.getDate()&&s.getHours()===c&&s.getMinutes()===o:!1,j=p.useRef(null);return e.jsxs("div",{className:"w-full  bg-gray-600",children:[e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"80px repeat(7, 1fr)"},children:[e.jsx("div",{className:"p-2 text-sm font-medium text-white/80",children:"Time"}),h.map(t=>e.jsxs("div",{className:"p-2 text-center",children:[e.jsx("div",{className:"text-white font-semibold",children:k[t.getDay()]}),e.jsxs("div",{className:"text-white/80 text-sm",children:[u(t.getMonth()+1),"/",u(t.getDate())]})]},t.toDateString()))]}),e.jsx("div",{ref:j,className:"grid border-t border-white/20 rounded-md overflow-hidden",style:{gridTemplateColumns:"80px repeat(7, 1fr)"},children:g.map((t,c)=>e.jsxs(p.Fragment,{children:[e.jsx("div",{className:"text-right pr-2 py-2 text-xs text-white/80 border-b border-white/10 bg-black/10",children:`${t.hour%12===0?12:t.hour%12}:${u(t.minute)} ${t.hour<12?"AM":"PM"}`}),h.map(o=>{const x=r(o,t.hour,t.minute);return e.jsx("button",{onClick:()=>b(o,t.hour,t.minute),className:["h-10 w-full border-b border-l border-white/10 focus:outline-none","hover:bg-white/10 transition-colors",x?"bg-pink-500/70 ring-2 ring-pink-300":""].join(" "),"aria-label":`Pick ${o.toDateString()} ${t.hour}:${u(t.minute)}`},o.toDateString()+"-"+c)})]},`${t.hour}:${t.minute}-${c}`))}),e.jsxs("div",{className:"mt-2 text-xs text-white/80",children:["Click a slot to set the appointment time. Currently showing"," ",a.start,":00â€“",a.end,":00 in ",m,"-minute slots."]})]})}const M=[{title:"New Appointment",href:"/appointment"}];function v({type:n,message:l}){const d=n==="success"?"bg-green-100 border-green-300 text-green-800":"bg-red-100 border-red-300 text-red-800";return e.jsx("div",{className:`mb-4 p-3 border ${d} rounded`,children:l})}function O(){const[n,l]=N.useState("new"),m=w().props?.flash||{},{data:a,setData:i,post:h,processing:g,errors:s}=_({client_number:"",email:"",new_client_name:"",new_client_phone:"",service:"",appointment_time:"",status:"Scheduled",notes:""}),b=r=>{r.preventDefault(),h("/appointment/store",{onSuccess:()=>{console.log("Appointment created successfully!")},onError:j=>{console.error("Validation errors:",j)},onFinish:()=>{console.log("Request finished.")}})};return e.jsxs(y,{breadcrumbs:M,children:[e.jsx(C,{title:"New Appointment"}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex items-center h-full",children:e.jsxs("div",{className:"p-10 mx-auto py-16 bg-pink-50 w-2xl border rounded-2xl shadow-md",children:[e.jsx("h1",{className:"text-xl font-bold mb-6 bg-pink-500 p-2 rounded-md text-white",children:"Create New Appointment"}),e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx("button",{type:"button",onClick:()=>{l("new"),i({client_number:"",email:"",new_client_name:"",new_client_phone:"",service:"",appointment_time:"",status:"Scheduled",notes:""})},className:`px-4 py-2 rounded ${n==="new"?"bg-pink-600 text-white":"bg-gray-200"}`,children:"New Client"}),e.jsx("button",{type:"button",onClick:()=>{l("existing"),i({client_number:"",email:"",new_client_name:"",new_client_phone:"",service:"",appointment_time:"",status:"",notes:""})},className:`px-4 py-2 rounded ${n==="existing"?"bg-pink-600 text-white":"bg-gray-200"}`,children:"Existing Client"})]}),m.success&&e.jsx(v,{type:"success",message:m.success}),m.error&&e.jsx(v,{type:"error",message:m.error}),e.jsxs("form",{onSubmit:b,className:"space-y-4 p-2",children:[n==="existing"?e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Client Number"}),e.jsx("input",{type:"text",placeholder:"e.g. +1 848 648 8448",className:"w-full border p-2 rounded",value:a.client_number,onChange:r=>i("client_number",r.target.value)}),s.client_number&&e.jsx("p",{className:"text-red-500",children:s.client_number})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Client Name"}),e.jsx("input",{type:"text",className:"w-full border p-2 rounded",placeholder:"e.g. John",value:a.new_client_name,onChange:r=>i("new_client_name",r.target.value)}),s.new_client_name&&e.jsx("p",{className:"text-red-500",children:s.new_client_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Client Phone"}),e.jsx("input",{type:"number",className:"w-full border p-2 rounded",placeholder:"e.g. +2 485 485 744",value:a.new_client_phone,onChange:r=>i("new_client_phone",r.target.value)}),s.new_client_phone&&e.jsx("p",{className:"text-red-500",children:s.new_client_phone})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block mb-1",children:"Email"}),e.jsx("input",{type:"email",className:"w-full border p-2 rounded",placeholder:"clientmail@domain.com",value:a.email,onChange:r=>i("email",r.target.value)}),s.email&&e.jsx("p",{className:"text-red-500",children:s.email})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Service"}),e.jsxs("select",{value:a.service,onChange:r=>i("service",r.target.value),className:"w-full border p-2 rounded",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Hair Cut",children:"Hair Cut"}),e.jsx("option",{value:"Beard Shaping",children:"Beard Shaping"}),e.jsx("option",{value:"Other Services",children:"Other Services"})]}),s.service&&e.jsx("p",{className:"text-red-500",children:s.service})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Appointment Time"}),e.jsx("input",{type:"datetime-local",className:"w-full border p-2 rounded",value:a.appointment_time,onChange:r=>i("appointment_time",r.target.value)}),s.appointment_time&&e.jsx("p",{className:"text-red-500",children:s.appointment_time})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Status"}),e.jsxs("select",{value:a.status,onChange:r=>i("status",r.target.value),className:"w-full border p-2 rounded",children:[e.jsx("option",{value:"Scheduled",children:"Scheduled"}),e.jsx("option",{value:"Confirmed",children:"Confirmed"}),e.jsx("option",{value:"Canceled",children:"Canceled"})]}),s.status&&e.jsx("p",{className:"text-red-500",children:s.status})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"notes",className:"block mb-1 font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{id:"notes",name:"notes",value:a.notes,onChange:r=>i("notes",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-pink-200"}),s.notes&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.notes})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-pink-600 text-white rounded",children:"Save Appointment"})})]})]})}),e.jsx("div",{className:"p-2 w-full h-screen",children:e.jsx(A,{value:a.appointment_time,onChange:r=>i("appointment_time",r),weekStartsOn:0,slotMinutes:30})})]})]})}export{O as default};
