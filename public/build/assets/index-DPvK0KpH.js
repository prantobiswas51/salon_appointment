import{u as h,r as d,j as e,H as j,b as m}from"./app-CFa08Xi8.js";import{A as N}from"./app-layout-BQRQNPwU.js";import{S as v,F as y,T as g}from"./trash-72vWvtTx.js";import"./app-2NQVvCmM.js";import"./app-logo-icon-B10nU9Rd.js";import"./index-B6z88rKP.js";import"./index-CxSUV7Ds.js";const f=[{title:"Appointment",href:"/appointment"}];function T(){const{appointments:n}=h().props,[x,i]=d.useState(!1),[t,a]=d.useState(null),[r,c]=d.useState(!1),p=s=>{a({...s}),i(!0)},o=()=>{i(!1),a(null)},u=s=>{if(s.preventDefault(),!t)return;c(!0);const l=`/appointments/${t.id}`;m.put(l,{service:t.service,duration:t.duration,attendence_status:t.attendence_status,appointment_time:t.appointment_time,status:t.status,notes:t.notes,client_id:t.client_id},{preserveScroll:!0,preserveState:!0,onFinish:()=>c(!1),onSuccess:o,onError:b=>{console.error(b)}})};return e.jsxs(N,{breadcrumbs:f,children:[e.jsx(j,{title:"Appointment"}),e.jsxs("div",{className:"p-2 m-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Scheduled Appointments"}),e.jsxs("form",{action:"",method:"get",className:"mb-4 flex",children:[e.jsx("input",{type:"text",placeholder:"Search by name, phone, email",className:"border p-2 px-4 min-w-lg rounded-md",name:"q"}),e.jsxs("button",{type:"submit",className:"border flex rounded-md ml-2 p-2 bg-pink-600 text-white",children:[e.jsx(v,{})," ",e.jsx("span",{className:"ml-1",children:"Search"})]})]}),e.jsxs("table",{className:"w-full border-gray-300 rounded-lg shadow-md text-sm text-left",children:[e.jsx("thead",{className:"text-gray-900 uppercase rounded-md bg-pink-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 border-b p-2",children:"Id"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Name"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Service"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Time"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Status"}),e.jsx("th",{className:"px-6 py-3 border-b",children:"Actions"})]})}),e.jsx("tbody",{children:n.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-6 py-4 border-b",children:s.id}),e.jsx("td",{className:"px-6 py-4 border-b",children:s.client?.name}),e.jsx("td",{className:"px-6 py-4 border-b",children:s.client?.phone}),e.jsx("td",{className:"px-6 py-4 border-b",children:s.service}),e.jsx("td",{className:"px-6 py-4 border-b",children:s.appointment_time}),e.jsx("td",{className:"px-6 py-4 border-b",children:s.status}),e.jsxs("td",{className:"px-6 py-4 border-b flex hover:cursor-pointer items-center",children:[e.jsx(y,{className:"text-amber-500 hover:text-amber-600",onClick:()=>p(s)}),e.jsx(g,{className:"text-red-500 hover:text-red-600 ml-3"})]})]},s.id))})]}),e.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:n.links.map((s,l)=>e.jsx("button",{disabled:!s.url,dangerouslySetInnerHTML:{__html:s.label},onClick:()=>s.url&&m.visit(s.url),className:`px-3 py-1 border rounded hover:cursor-pointer
                ${s.active?"bg-pink-600 text-white":"bg-white text-pink-600"}
                ${s.url?"":"opacity-50 cursor-not-allowed"}`},l))}),x&&t&&e.jsx("div",{className:"fixed inset-0 bg-gray-700/20 bg-opacity-50 flex justify-center items-center",children:e.jsxs("div",{className:"bg-sky-100 min-w-xl p-6 rounded-md shadow-lg w-[30rem]",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Appointment"}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Service"}),e.jsx("input",{type:"text",className:"border p-2 rounded-md w-full",value:t.service,onChange:s=>a({...t,service:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Duration"}),e.jsx("input",{type:"text",className:"border p-2 rounded-md w-full",value:t.duration,onChange:s=>a({...t,duration:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Attendance Status"}),e.jsx("input",{type:"text",className:"border p-2 rounded-md w-full",value:t.attendence_status,onChange:s=>a({...t,attendence_status:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Appointment Time"}),e.jsx("input",{type:"text",className:"border p-2 rounded-md w-full",value:t.appointment_time,onChange:s=>a({...t,appointment_time:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Status"}),e.jsx("input",{type:"text",className:"border p-2 rounded-md w-full",value:t.status,onChange:s=>a({...t,status:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Notes"}),e.jsx("textarea",{className:"border p-2 rounded-md w-full",value:t.notes??"",onChange:s=>a({...t,notes:s.target.value})})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700",children:"Client"}),e.jsx("div",{className:"mt-1",children:t.client?.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700",children:"Phone"}),e.jsx("div",{className:"mt-1",children:t.client?.phone})]})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",className:"mr-2 border px-4 py-2 rounded-md text-gray-600",onClick:o,disabled:r,children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md disabled:opacity-60",disabled:r,children:r?"Savingâ€¦":"Save Changes"})]})]})]})})]})]})}export{T as default};
