import{r,u as E,a as F,j as e,H as R,b as H}from"./app-DIUYQF6f.js";import{A as O}from"./app-layout-CeQPtF7U.js";import{R as I,F as q,i as z,a as P,L as W}from"./index-sWCL_bg4.js";import{a as v}from"./app-logo-icon-BK5fxnSD.js";import"./app-Cke7NK9K.js";import"./index-Cpo66LQB.js";import"./index-BXjbJVS4.js";import"./transition-YwBpSmCG.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],G=v("CalendarDays",B);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],h=v("Timer",X),J=[{title:"Dashboard",href:"/dashboard"}];function de({appointments:f,inProgress:d,nextAppointment:n,countToday:y,countWeek:N,countMonth:k,calendarEvents:w}){const[S,V]=r.useState(w),[_,i]=r.useState(!1),[Z,K]=r.useState("new"),[c,u]=r.useState(!1),[o,m]=r.useState(""),C=async()=>{u(!0),m("");try{const p=await(await fetch("/calendar/events",{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})).json();if(p.success){const{created:b,updated:g,errors:j}=p.results;let x="Sync completed! ";b>0&&(x+=`${b} created, `),g>0&&(x+=`${g} updated, `),j.length>0&&(x+=`${j.length} errors`),m(x.replace(/,\s*$/,"")),setTimeout(()=>{H.reload()},2e3)}else m("Sync failed. Please try again.")}catch{m("Sync failed. Please check your connection.")}finally{u(!1)}};E().props?.flash;const{data:l,setData:t,post:M,processing:T,errors:a,reset:D}=F({client_name:"",client_phone:"",service:"",start_time:"",duration:"",status:"Scheduled",notes:""}),L=s=>s.toLocaleString("sv-SE",{timeZone:"Europe/Rome"}).replace(" ","T").slice(0,16),$=s=>{t("start_time",L(s.start)),i(!0)},A=s=>{s.preventDefault(),M("/appointment/store",{onSuccess:()=>{alert("Appointment saved!"),i(!1),D()}})};return e.jsxs(O,{breadcrumbs:J,children:[e.jsx(R,{title:"Dashboard"}),e.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-2 dark:bg-gray-900 p-2 rounded-lg",children:[d&&e.jsxs("div",{className:"w-auto border p-2 bg-sky-200/30 border-sky-500 m-2 rounded-md shadow-sm",children:[e.jsxs("h2",{className:"text-xl font-bold flex",children:[e.jsx(h,{className:"mr-2"}),"Appointment in Progress"]}),e.jsx("h3",{className:"font-semibold flex",children:d.client_name}),e.jsx("h3",{children:d.service}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{children:["Time : ",d.start_time]}),e.jsx("span",{className:"bg-green-200 px-2 p-1 rounded-2xl text-sm",children:"In progress"})]})]}),n&&e.jsxs("div",{className:"w-auto border p-2 bg-amber-200/30 border-amber-500 m-2 rounded-md shadow-sm",children:[e.jsxs("h2",{className:"text-xl font-bold flex",children:[e.jsx(h,{className:"mr-2"}),"Next Appointment"]}),e.jsx("h3",{className:"font-semibold flex",children:n.client_name}),e.jsx("h3",{children:n.service}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{children:["Time : ",n.start_time]}),e.jsx("span",{className:" px-2 p-1 rounded-2xl text-sm",children:"Next"})]})]})]}),e.jsx("h2",{className:"text-xl font-bold flex mx-2 mt-6",children:"Today's Agenda"}),e.jsxs("div",{className:"w-auto px-4 md:grid md:grid-cols-3 gap-3 dark:bg-gray-900 p-2 rounded-lg",children:[e.jsxs("div",{className:"p-2 my-2 rounded-md bg-pink-300/60 border border-pink-500 shadow-sm",children:[e.jsx("div",{className:"font-bold",children:"Today"}),e.jsxs("span",{className:"text-3xl flex",children:[y," ",e.jsx("div",{className:"text-sm ml-2",children:"appointments"})]})]}),e.jsxs("div",{className:"p-2 my-2 rounded-md bg-pink-300/60 border border-pink-500 shadow-sm",children:[e.jsx("div",{className:"font-bold",children:"Week"}),e.jsxs("span",{className:"text-3xl flex",children:[N," ",e.jsx("div",{className:"text-sm ml-2",children:"appointments"})]})]}),e.jsxs("div",{className:"p-2 my-2 rounded-md bg-pink-300/60 border border-pink-500 shadow-sm",children:[e.jsx("div",{className:"font-bold",children:"Month"}),e.jsxs("span",{className:"text-3xl flex",children:[k," ",e.jsx("div",{className:"text-sm ml-2",children:"appointments"})]})]})]}),e.jsxs("h2",{className:"text-xl font-bold mx-2 mt-6 flex",children:[e.jsx(G,{className:"mr-2"}),"Today's Agenda"]}),e.jsx("div",{className:"w-auto mx-2 rounded-md",children:f.map(s=>e.jsxs("div",{className:"p-2 my-2 rounded-md border-green-600 border shadow-sm md:flex lg:max-w-[50%] md:justify-between md:items-center",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"font-bold text-gray-600 flex items-center",children:[e.jsx(h,{className:"mr-1"}),s.start_time]}),e.jsx("span",{className:`p-2 py-1 rounded-2xl md:ml-4 ${s.status==="completed"?"bg-green-600 text-white":s.status==="in_progress"?"bg-blue-400/60 text-black":"bg-pink-400/60 text-black"}`,children:s.status})]}),e.jsx("div",{className:"font-bold ml-2",children:s.client_name}),e.jsx("div",{className:"ml-2",children:s.service})]},s.id))}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Calendar"}),e.jsxs("button",{onClick:C,disabled:c,className:`px-3 py-1 flex items-center text-white rounded transition-colors ${c?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"}`,children:[e.jsx(I,{className:`mr-2 w-4 ${c?"animate-spin":""}`}),c?"Syncing...":"Sync"]})]}),o&&e.jsx("div",{className:`mb-4 p-3 rounded-md ${o.includes("failed")||o.includes("error")?"bg-red-100 text-red-700 border border-red-200":"bg-green-100 text-green-700 border border-green-200"}`,children:o})]}),e.jsx(q,{plugins:[z,P],initialView:"timeGridWeek",selectable:!0,selectMirror:!0,selectOverlap:!1,events:S,select:$,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",height:"auto",selectLongPressDelay:200,slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1}})]}),e.jsx(W,{open:_,onClose:()=>i(!1),className:"relative z-50 p-6 dialog",children:e.jsx("div",{className:"fixed inset-0 z-[9999] bg-gray-700/20 flex justify-center items-center p-4",children:e.jsxs("div",{className:`bg-sky-100 dark:bg-gray-800 dark:border-gray-100 w-full max-w-[95%] sm:max-w-[30rem] rounded-lg shadow-lg 
                  max-h-[90vh] overflow-y-auto p-6`,children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Appointment"}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Client Name"}),e.jsx("input",{type:"text",className:"w-full border bg-white p-2 rounded",placeholder:"e.g. John",value:l.client_name,onChange:s=>t("client_name",s.target.value)}),a.client_name&&e.jsx("p",{className:"text-red-500",children:a.client_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Client Phone"}),e.jsx("input",{type:"tel",className:"w-full border bg-white p-2 rounded",placeholder:"e.g. +2 485 485 744",value:l.client_phone,onChange:s=>t("client_phone",s.target.value)}),a.client_phone&&e.jsx("p",{className:"text-red-500",children:a.client_phone})]})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Service"}),e.jsxs("select",{value:l.service,onChange:s=>t("service",s.target.value),className:"w-full border bg-white p-2 rounded dark:bg-gray-900",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Hair Cut",children:"Hair Cut"}),e.jsx("option",{value:"Beard Shaping",children:"Beard Shaping"}),e.jsx("option",{value:"Other Services",children:"Other Services"})]}),a.service&&e.jsx("p",{className:"text-red-500",children:a.service})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Duration (Minutes)"}),e.jsx("input",{type:"number",className:"w-full border bg-white p-2 rounded",placeholder:"30",value:l.duration,onChange:s=>t("duration",s.target.value)}),a.duration&&e.jsx("p",{className:"text-red-500",children:a.duration})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Appointment Time"}),e.jsx("input",{type:"datetime-local",className:"w-full border bg-white p-2 rounded",value:l.start_time,onChange:s=>t("start_time",s.target.value)}),a.start_time&&e.jsx("p",{className:"text-red-500",children:a.start_time})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Status"}),e.jsxs("select",{value:l.status,onChange:s=>t("status",s.target.value),className:"w-full border bg-white p-2 rounded dark:bg-gray-900",children:[e.jsx("option",{value:"Scheduled",children:"Scheduled"}),e.jsx("option",{value:"Confirmed",children:"Confirmed"}),e.jsx("option",{value:"Canceled",children:"Canceled"})]}),a.status&&e.jsx("p",{className:"text-red-500",children:a.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Notes"}),e.jsx("textarea",{className:"w-full border bg-white p-2 rounded",value:l.notes,onChange:s=>t("notes",s.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-300 rounded hover:cursor-pointer dark:text-gray-900",onClick:()=>i(!1),children:"Cancel"}),e.jsx("button",{type:"submit",disabled:T,className:"px-4 py-2 bg-pink-600 text-white rounded hover:cursor-pointer",children:"Save Appointment"})]})]})]})})})]})}export{de as default};
