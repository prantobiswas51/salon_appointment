import{u as T,r as i,j as e,H as $,b as c}from"./app-CdBnJfQc.js";import{A as M,X as o}from"./app-layout-rylD81fG.js";import{a as q}from"./app-logo-icon-DrNZqPdp.js";import{S as H,T as C}from"./trash-BAcYlkir.js";import{F}from"./file-pen-B0XUh3R1.js";import"./app-smwvGtT5.js";import"./index-CPxd4EPi.js";import"./index-D63Qde5a.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],P=q("Filter",L);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"M12 14v-4",key:"1evpnu"}],["path",{d:"M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6",key:"1ts96g"}],["path",{d:"M9 17H4v5",key:"8t5av"}]],A=q("TimerReset",O),B=[{title:"Appointment",href:"/appointment"}];function V(){const{appointments:h,filters:r,flash:x}=T().props,[E,g]=i.useState(!1),[t,a]=i.useState(null),[p,j]=i.useState(!1),[m,v]=i.useState(null),[u,y]=i.useState(null),[N,R]=i.useState(!1),[d,f]=i.useState({q:r.q||"",date_from:r.date_from||"",date_to:r.date_to||"",status:r.status||"",service:r.service||"",attendance_status:r.attendance_status||""}),z=s=>{s.preventDefault(),c.get("/appointments",d,{preserveState:!0,preserveScroll:!0})},D=()=>{f({q:"",date_from:"",date_to:"",status:"",service:"",attendance_status:""}),c.get("/appointments",{},{preserveState:!0,preserveScroll:!0})},l=(s,n)=>{f(b=>({...b,[s]:n}))},w=s=>{a({...s}),g(!0)},S=s=>{window.confirm("Send Reminder?")&&(y(s),c.post(`/whatsapp/manual/${s}`,{id:s},{preserveScroll:!0,onFinish:()=>y(null),onError:n=>{console.error(n),window.alert("Failed to send reminder.")},onSuccess:n=>{}}))},_=()=>{g(!1),a(null)},k=s=>{window.confirm("Are you sure you want to delete this appointment?")&&(v(s),c.delete(`/appointment/delete/${s}`,{preserveScroll:!0,onFinish:()=>v(null),onError:n=>{console.error(n),window.alert("Failed to delete appointment.")},onSuccess:()=>{c.visit(window.location.href,{only:["appointments"],preserveScroll:!0})}}))},I=s=>{if(s.preventDefault(),!t)return;j(!0);const n=`/appointments/${t.id}`;c.put(n,{service:t.service,duration:t.duration,attendance_status:t.attendence_status,start_time:t.start_time,status:t.status,event_id:t.event_id,notes:t.notes,client_id:t.client_id,client_name:t.client?.name,client_phone:t.client?.phone,client_email:t.client?.email},{preserveScroll:!0,preserveState:!0,onFinish:()=>j(!1),onSuccess:_,onError:b=>{console.error(b)}})};return e.jsxs(M,{breadcrumbs:B,children:[e.jsx($,{title:"Appointment"}),e.jsxs("div",{children:[x.success&&e.jsx("div",{className:"mb-4 rounded bg-green-100 text-green-700 p-3",children:x.success}),x.error&&e.jsx("div",{className:"mb-4 rounded bg-red-100 text-red-700 p-3",children:x.error})]}),e.jsxs("div",{className:"p-2 m-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Scheduled Appointments"}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("form",{onSubmit:z,className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",placeholder:"Search by name, phone, email, service...",className:"border p-3 px-4 flex-1 rounded-lg",value:d.q,onChange:s=>l("q",s.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>R(!N),className:"border flex justify-center items-center rounded-lg p-3 bg-gray-100 hover:bg-gray-200 transition-colors",children:[e.jsx(P,{className:"mr-1",size:16}),e.jsx("span",{children:"Filters"})]}),e.jsxs("button",{type:"submit",className:"border flex justify-center items-center rounded-lg p-3 bg-pink-600 text-white hover:bg-pink-700 transition-colors",children:[e.jsx(H,{className:"mr-1",size:16}),e.jsx("span",{children:"Search"})]})]})]}),N&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date From"}),e.jsx("input",{type:"date",className:"w-full border p-2 rounded-lg",value:d.date_from,onChange:s=>l("date_from",s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date To"}),e.jsx("input",{type:"date",className:"w-full border p-2 rounded-lg",value:d.date_to,onChange:s=>l("date_to",s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{className:"w-full border p-2 rounded-lg",value:d.status,onChange:s=>l("status",s.target.value),children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"Scheduled",children:"Scheduled"}),e.jsx("option",{value:"Confirmed",children:"Confirmed"}),e.jsx("option",{value:"Canceled",children:"Canceled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Service"}),e.jsxs("select",{className:"w-full border p-2 rounded-lg",value:d.service,onChange:s=>l("service",s.target.value),children:[e.jsx("option",{value:"",children:"All Services"}),e.jsx("option",{value:"Hair Cut",children:"Hair Cut"}),e.jsx("option",{value:"Beard Shaping",children:"Beard Shaping"}),e.jsx("option",{value:"Other Services",children:"Other Services"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Attendance"}),e.jsxs("select",{className:"w-full border p-2 rounded-lg",value:d.attendance_status,onChange:s=>l("attendance_status",s.target.value),children:[e.jsx("option",{value:"",children:"All Attendance"}),e.jsx("option",{value:"attended",children:"Attended"}),e.jsx("option",{value:"canceled",children:"Canceled"}),e.jsx("option",{value:"no_show",children:"No Show"}),e.jsx("option",{value:"pending",children:"Pending"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{type:"button",onClick:D,className:"w-full flex justify-center items-center rounded-lg p-2 bg-red-100 hover:bg-red-200 text-red-700 transition-colors",children:[e.jsx(o,{className:"mr-1",size:16}),e.jsx("span",{children:"Clear Filters"})]})})]})}),(r.q||r.date_from||r.date_to||r.status||r.service||r.attendance_status)&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active filters:"}),r.q&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:['Search: "',r.q,'"',e.jsx("button",{type:"button",onClick:()=>l("q",""),className:"ml-1 text-blue-600 hover:text-blue-800",children:e.jsx(o,{size:12})})]}),r.date_from&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:["From: ",r.date_from,e.jsx("button",{type:"button",onClick:()=>l("date_from",""),className:"ml-1 text-green-600 hover:text-green-800",children:e.jsx(o,{size:12})})]}),r.date_to&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:["To: ",r.date_to,e.jsx("button",{type:"button",onClick:()=>l("date_to",""),className:"ml-1 text-green-600 hover:text-green-800",children:e.jsx(o,{size:12})})]}),r.status&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full",children:["Status: ",r.status,e.jsx("button",{type:"button",onClick:()=>l("status",""),className:"ml-1 text-purple-600 hover:text-purple-800",children:e.jsx(o,{size:12})})]}),r.service&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:["Service: ",r.service,e.jsx("button",{type:"button",onClick:()=>l("service",""),className:"ml-1 text-yellow-600 hover:text-yellow-800",children:e.jsx(o,{size:12})})]}),r.attendance_status&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-indigo-100 text-indigo-800 text-xs rounded-full",children:["Attendance: ",r.attendance_status,e.jsx("button",{type:"button",onClick:()=>l("attendance_status",""),className:"ml-1 text-indigo-600 hover:text-indigo-800",children:e.jsx(o,{size:12})})]})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"hidden lg:table min-w-full border-gray-300 rounded-lg shadow-lg text-sm text-left",children:[e.jsx("thead",{className:"text-gray-900 uppercase bg-pink-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Id"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Name"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Phone"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Service"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Time"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Duration"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Status"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Reminder"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Actions"})]})}),e.jsx("tbody",{children:h.data.map(s=>e.jsxs("tr",{className:"hover:dark:bg-gray-900 hover:bg-gray-200 transition",children:[e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.id}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.client?.name}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.client?.phone}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.service}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:new Date(s.start_time).toLocaleString()}),e.jsxs("td",{className:"px-3 lg:px-6 py-4 border-b",children:[s.duration," Minutes"]}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.status}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.reminder_sent}),e.jsxs("td",{className:"px-3 lg:px-6 py-4 border-b flex items-center",children:[e.jsx("button",{type:"button",className:`ml-3 ${u===s.id?"opacity-50 cursor-not-allowed":"hover:cursor-pointer"}`,onClick:()=>S(s.id),disabled:u===s.id,children:e.jsx(A,{className:"text-amber-500 hover:text-amber-600 hover:cursor-pointer"})}),e.jsx(F,{className:"text-amber-500 hover:text-amber-600 ml-2 hover:cursor-pointer",onClick:()=>w(s)}),e.jsx("button",{type:"button",className:`ml-3 ${m===s.id?"opacity-50 cursor-not-allowed":"hover:cursor-pointer"}`,onClick:()=>k(s.id),disabled:m===s.id,children:e.jsx(C,{className:"text-red-500 hover:text-red-600"})})]})]},s.id))})]}),e.jsx("div",{className:"space-y-4 lg:hidden",children:h.data.map(s=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 border rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"ID"}),e.jsx("span",{className:"font-medium",children:s.id})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Name"}),e.jsx("span",{children:s.client?.name})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Phone"}),e.jsx("span",{children:s.client?.phone})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Service"}),e.jsx("span",{children:s.service})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Time"}),e.jsx("span",{children:s.start_time})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Status"}),e.jsx("span",{children:s.status})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Reminder"}),e.jsx("span",{children:s.reminder_sent})]}),e.jsxs("div",{className:"flex justify-end mt-3",children:[e.jsx("button",{type:"button",className:`ml-3 ${u===s.id?"opacity-50 cursor-not-allowed":"hover:cursor-pointer"}`,onClick:()=>S(s.id),disabled:u===s.id,children:e.jsx(A,{className:"text-amber-500 hover:text-amber-600 hover:cursor-pointer"})}),e.jsx(F,{className:"text-amber-500 hover:text-amber-600 ml-2 hover:cursor-pointer mr-3",onClick:()=>w(s)}),e.jsx("button",{type:"button",className:`${m===s.id?"opacity-50 cursor-not-allowed":"hover:cursor-pointer"}`,onClick:()=>k(s.id),disabled:m===s.id,children:e.jsx(C,{className:"text-red-500 hover:text-red-600"})})]})]},s.id))})]}),e.jsx("div",{className:"flex flex-wrap justify-center mt-6 space-x-2",children:h.links.map((s,n)=>e.jsx("button",{disabled:!s.url,dangerouslySetInnerHTML:{__html:s.label},onClick:()=>s.url&&c.visit(s.url),className:`px-3 py-1 border rounded mb-2
            ${s.active?"bg-pink-600 text-white":"bg-white text-pink-600"}
            ${s.url?"hover:cursor-pointer":"opacity-50 cursor-not-allowed"}`},n))}),E&&t&&e.jsx("div",{className:"fixed inset-0 z-[9999] bg-gray-700/20 flex justify-center items-center p-4",children:e.jsxs("div",{className:`bg-sky-100 dark:bg-gray-800 dark:border-gray-100 w-full max-w-[95%] sm:max-w-[30rem] rounded-lg shadow-lg 
                  max-h-[90vh] overflow-y-auto p-6`,children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Appointment"}),e.jsxs("form",{onSubmit:I,children:[e.jsxs("div",{className:"mb-4 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700 ",children:"Client"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"text",className:"border p-2 rounded-lg w-full dark:border-gray-300",required:!0,value:t.client?.name||"",onChange:s=>a({...t,client:{...t.client,name:s.target.value}})})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700",children:"Phone"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"text",required:!0,className:"border p-2 rounded-lg w-full dark:border-gray-300",value:t.client?.phone||"",onChange:s=>a({...t,client:{...t.client,phone:s.target.value}})})})]})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Service"}),e.jsx("input",{type:"text",className:"border p-2 rounded-lg w-full dark:border-gray-300",value:t.service,onChange:s=>a({...t,service:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Duration"}),e.jsx("input",{type:"number",className:"border p-2 rounded-lg w-full dark:border-gray-300",value:t.duration,onChange:s=>a({...t,duration:s.target.value})})]})]}),e.jsx("input",{type:"hidden",className:"border p-2 rounded-lg w-full dark:border-gray-300",value:t.event_id,onChange:s=>a({...t,event_id:s.target.value})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Appointment Start Time"}),e.jsx("input",{type:"datetime-local",className:"border p-2 rounded-lg w-full dark:border-gray-300",value:t.start_time?new Date(t.start_time).toLocaleString("sv-SE",{timeZone:"Europe/Rome"}).slice(0,16):"",onChange:s=>a({...t,start_time:s.target.value})})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Status"}),e.jsxs("select",{className:"border p-2 rounded-lg w-full dark:border-gray-300",value:t.status,onChange:s=>a({...t,status:s.target.value}),children:[e.jsx("option",{value:"Confirmed",children:"Confirmed"}),e.jsx("option",{value:"Canceled",children:"Canceled"}),e.jsx("option",{value:"Scheduled",children:"Scheduled"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Attendance Status"}),e.jsxs("select",{className:"border p-2 rounded-lg w-full dark:border-gray-300",value:t.attendence_status,onChange:s=>a({...t,attendence_status:s.target.value}),children:[e.jsx("option",{value:"Green",children:"Green"}),e.jsx("option",{value:"Red",children:"Red"}),e.jsx("option",{value:"Yellow",children:"Yellow"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Notes"}),e.jsx("textarea",{className:"border p-2 rounded-lg w-full dark:border-gray-300",value:t.notes??"",onChange:s=>a({...t,notes:s.target.value})})]}),e.jsxs("div",{className:"flex justify-end flex-wrap",children:[e.jsx("button",{type:"button",className:"mr-2 mb-2 border px-4 py-2 rounded-lg text-gray-600 hover:cursor-pointer",onClick:_,disabled:p,children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg disabled:opacity-60 hover:cursor-pointer",disabled:p,children:p?"Saving…":"Save Changes"})]})]})]})})]})]})}export{V as default};
