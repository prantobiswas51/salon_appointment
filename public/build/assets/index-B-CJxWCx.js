import{u as N,r as a,j as e,H as _,c as d}from"./app-Q6E-p1IV.js";import{A}from"./app-layout-C7ftCoDV.js";import{S as E,T as y}from"./trash-5bvUGf8b.js";import{a as R}from"./app-logo-icon-DkZdRHVe.js";import{F as f}from"./file-pen-_a8CC15o.js";import"./app-BApxnxXQ.js";import"./index-bo5UkDVW.js";import"./index-oFaQmnDt.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"M12 14v-4",key:"1evpnu"}],["path",{d:"M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6",key:"1ts96g"}],["path",{d:"M9 17H4v5",key:"8t5av"}]],w=R("TimerReset",I),$=[{title:"Appointment",href:"/appointment"}];function O(){const{appointments:o}=N().props,{flash:n}=N().props,[S,m]=a.useState(!1),[r,l]=a.useState(null),[x,h]=a.useState(!1),[i,u]=a.useState(null),[c,b]=a.useState(null),p=s=>{l({...s}),m(!0)},j=s=>{window.confirm("Send Reminder?")&&(b(s),d.post(`/whatsapp/manual/${s}`,{id:s},{preserveScroll:!0,onFinish:()=>b(null),onError:t=>{console.error(t),window.alert("Failed to send reminder.")},onSuccess:t=>{}}))},g=()=>{m(!1),l(null)},v=s=>{window.confirm("Are you sure you want to delete this appointment?")&&(u(s),d.delete(`/appointment/delete/${s}`,{preserveScroll:!0,onFinish:()=>u(null),onError:t=>{console.error(t),window.alert("Failed to delete appointment.")},onSuccess:()=>{d.visit(window.location.href,{only:["appointments"],preserveScroll:!0})}}))},k=s=>{if(s.preventDefault(),!r)return;h(!0);const t=`/appointments/${r.id}`;d.put(t,{service:r.service,duration:r.duration,attendence_status:r.attendence_status,start_time:r.start_time,status:r.status,notes:r.notes,client_id:r.client_id},{preserveScroll:!0,preserveState:!0,onFinish:()=>h(!1),onSuccess:g,onError:C=>{console.error(C)}})};return e.jsxs(A,{breadcrumbs:$,children:[e.jsx(_,{title:"Appointment"}),e.jsxs("div",{children:[n.success&&e.jsx("div",{className:"mb-4 rounded bg-green-100 text-green-700 p-3",children:n.success}),n.error&&e.jsx("div",{className:"mb-4 rounded bg-red-100 text-red-700 p-3",children:n.error})]}),e.jsxs("div",{className:"p-2 m-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Scheduled Appointments"}),e.jsxs("form",{action:"",method:"get",className:"mb-4 flex flex-col sm:flex-row",children:[e.jsx("input",{type:"text",placeholder:"Search by name, phone, email",className:"border p-2 px-4 flex-1 rounded-lg mb-2 sm:mb-0 sm:mr-2",name:"q"}),e.jsxs("button",{type:"submit",className:"border flex justify-center items-center rounded-lg p-2 bg-pink-600 text-white",children:[e.jsx(E,{className:"mr-1"})," ",e.jsx("span",{children:"Search"})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"hidden lg:table min-w-full border-gray-300 rounded-lg shadow-lg text-sm text-left",children:[e.jsx("thead",{className:"text-gray-900 uppercase bg-pink-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Id"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Name"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Phone"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Service"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Time"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Duration"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Status"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Reminder"}),e.jsx("th",{className:"px-3 lg:px-6 py-3 border-b",children:"Actions"})]})}),e.jsx("tbody",{children:o.data.map(s=>e.jsxs("tr",{className:"hover:dark:bg-gray-900 hover:bg-gray-200 transition",children:[e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.id}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.client?.name}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.client?.phone}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.service}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.start_time}),e.jsxs("td",{className:"px-3 lg:px-6 py-4 border-b",children:[s.duration," Minutes"]}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.status}),e.jsx("td",{className:"px-3 lg:px-6 py-4 border-b",children:s.reminder_sent}),e.jsxs("td",{className:"px-3 lg:px-6 py-4 border-b flex items-center",children:[e.jsx("button",{type:"button",className:`ml-3 ${c===s.id?"opacity-50 cursor-not-allowed":"hover:cursor-pointer"}`,onClick:()=>j(s.id),disabled:c===s.id,children:e.jsx(w,{className:"text-amber-500 hover:text-amber-600 hover:cursor-pointer"})}),e.jsx(f,{className:"text-amber-500 hover:text-amber-600 ml-2 hover:cursor-pointer",onClick:()=>p(s)}),e.jsx("button",{type:"button",className:`ml-3 ${i===s.id?"opacity-50 cursor-not-allowed":"hover:cursor-pointer"}`,onClick:()=>v(s.id),disabled:i===s.id,children:e.jsx(y,{className:"text-red-500 hover:text-red-600"})})]})]},s.id))})]}),e.jsx("div",{className:"space-y-4 lg:hidden",children:o.data.map(s=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 border rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"ID"}),e.jsx("span",{className:"font-medium",children:s.id})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Name"}),e.jsx("span",{children:s.client?.name})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Phone"}),e.jsx("span",{children:s.client?.phone})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Service"}),e.jsx("span",{children:s.service})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Time"}),e.jsx("span",{children:s.start_time})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Status"}),e.jsx("span",{children:s.status})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Reminder"}),e.jsx("span",{children:s.reminder_sent})]}),e.jsxs("div",{className:"flex justify-end mt-3",children:[e.jsx("button",{type:"button",className:`ml-3 ${c===s.id?"opacity-50 cursor-not-allowed":"hover:cursor-pointer"}`,onClick:()=>j(s.id),disabled:c===s.id,children:e.jsx(w,{className:"text-amber-500 hover:text-amber-600 hover:cursor-pointer"})}),e.jsx(f,{className:"text-amber-500 hover:text-amber-600 ml-2 hover:cursor-pointer mr-3",onClick:()=>p(s)}),e.jsx("button",{type:"button",className:`${i===s.id?"opacity-50 cursor-not-allowed":"hover:cursor-pointer"}`,onClick:()=>v(s.id),disabled:i===s.id,children:e.jsx(y,{className:"text-red-500 hover:text-red-600"})})]})]},s.id))})]}),e.jsx("div",{className:"flex flex-wrap justify-center mt-6 space-x-2",children:o.links.map((s,t)=>e.jsx("button",{disabled:!s.url,dangerouslySetInnerHTML:{__html:s.label},onClick:()=>s.url&&d.visit(s.url),className:`px-3 py-1 border rounded mb-2
            ${s.active?"bg-pink-600 text-white":"bg-white text-pink-600"}
            ${s.url?"hover:cursor-pointer":"opacity-50 cursor-not-allowed"}`},t))}),S&&r&&e.jsx("div",{className:"fixed inset-0 bg-gray-700/20 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-sky-100 dark:bg-gray-800 dark:border-gray-100 w-full max-w-[95%] sm:max-w-[30rem] p-6 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Appointment"}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Service"}),e.jsx("input",{type:"text",className:"border p-2 rounded-lg w-full dark:border-gray-300",value:r.service,onChange:s=>l({...r,service:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Duration"}),e.jsx("input",{type:"number",className:"border p-2 rounded-lg w-full dark:border-gray-300",value:r.duration,onChange:s=>l({...r,duration:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Appointment Start Time"}),e.jsx("input",{type:"datetime-local",className:"border p-2 rounded-lg w-full dark:border-gray-300",value:r.start_time?new Date(r.start_time).toLocaleString("sv-SE",{timeZone:"Europe/Rome"}).slice(0,16):"",onChange:s=>l({...r,start_time:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Status"}),e.jsxs("select",{className:"border p-2 rounded-lg w-full dark:border-gray-300",value:r.status,onChange:s=>l({...r,status:s.target.value}),children:[e.jsx("option",{value:"Confirmed",children:"Confirmed"}),e.jsx("option",{value:"Canceled",children:"Canceled"}),e.jsx("option",{value:"Scheduled",children:"Scheduled"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Attendance Status"}),e.jsxs("select",{className:"border p-2 rounded-lg w-full dark:border-gray-300",value:r.attendence_status,onChange:s=>l({...r,attendence_status:s.target.value}),children:[e.jsx("option",{value:"Green",children:"Green"}),e.jsx("option",{value:"Red",children:"Red"}),e.jsx("option",{value:"Yellow",children:"Yellow"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Notes"}),e.jsx("textarea",{className:"border p-2 rounded-lg w-full dark:border-gray-300",value:r.notes??"",onChange:s=>l({...r,notes:s.target.value})})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700 ",children:"Client"}),e.jsx("div",{className:"mt-1 ",children:r.client?.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700",children:"Phone"}),e.jsx("div",{className:"mt-1",children:r.client?.phone})]})]}),e.jsxs("div",{className:"flex justify-end flex-wrap",children:[e.jsx("button",{type:"button",className:"mr-2 mb-2 border px-4 py-2 rounded-lg text-gray-600",onClick:g,disabled:x,children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg disabled:opacity-60",disabled:x,children:x?"Saving…":"Save Changes"})]})]})]})})]})]})}export{O as default};
