import{r,u as j,a as v,j as e,H as N,b as _}from"./app-CdBnJfQc.js";import{A as f}from"./app-layout-rylD81fG.js";import{R as w,F as y,i as C,a as k,L as S}from"./index-Ci49PtPm.js";import"./app-smwvGtT5.js";import"./app-logo-icon-DrNZqPdp.js";import"./index-CPxd4EPi.js";import"./index-D63Qde5a.js";import"./transition-Cggy5lK9.js";const A=[{title:"New Appointment",href:"/appointment"}];function $(){const[o,E]=r.useState([]),[m,n]=r.useState(!1),[i,c]=r.useState("new"),u=()=>{_.get(route("sync"))};j().props?.flash;const{data:l,setData:a,post:p,processing:x,errors:s,reset:h}=v({client_number:"",email:"",new_client_name:"",new_client_phone:"",service:"",start_time:"",duration:"",status:"Scheduled",notes:""}),d=t=>t.toLocaleString("sv-SE",{timeZone:"Europe/Rome"}).replace(" ","T").slice(0,16),b=t=>{a("start_time",d(t.start)),n(!0)},g=t=>{t.preventDefault(),p("/appointment/store",{onSuccess:()=>{alert("Appointment saved!"),n(!1),h()}})};return e.jsxs(f,{breadcrumbs:A,children:[e.jsx(N,{title:"New Appointment"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Calendar"}),e.jsxs("button",{onClick:u,className:"px-3 py-1 bg-blue-500 flex items-center text-white rounded hover:bg-blue-600",children:[e.jsx(w,{className:"mr-2 w-4"})," Sync"]})]}),e.jsx(y,{plugins:[C,k],initialView:"timeGridWeek",selectable:!0,events:o,select:b,dateClick:t=>{a("start_time",d(t.date)),n(!0)},slotMinTime:"09:00:00",slotMaxTime:"23:00:00",height:"auto",slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1}})]}),e.jsx(S,{open:m,onClose:()=>n(!1),className:"relative z-50 ",children:e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 ",children:e.jsxs("div",{className:"dark:bg-gray-900 p-6 rounded shadow w-full max-w-lg bg-gray-300",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Book Appointment"}),e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx("button",{type:"button",onClick:()=>{c("new"),a({client_number:"",email:"",new_client_name:"",new_client_phone:"",service:"",duration:"",start_time:l.start_time,status:"Scheduled",notes:""})},className:`px-4 py-2 rounded ${i==="new"?"bg-pink-600 text-white":"bg-gray-200 text-gray-700"}`,children:"New Client"}),e.jsx("button",{type:"button",onClick:()=>{c("existing"),a({client_number:"",email:"",new_client_name:"",new_client_phone:"",service:"",duration:"",start_time:l.start_time,status:"Scheduled",notes:""})},className:`px-4 py-2 rounded ${i==="existing"?"bg-pink-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Existing Client"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4 ",children:[i==="existing"?e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Client Number"}),e.jsx("input",{type:"text",required:!0,placeholder:"e.g. +1 848 648 8448",className:"w-full border p-2 rounded",value:l.client_number,onChange:t=>a("client_number",t.target.value)}),s.client_number&&e.jsx("p",{className:"text-red-500",children:s.client_number})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Client Name"}),e.jsx("input",{type:"text",required:!0,className:"w-full border p-2 rounded",placeholder:"e.g. John",value:l.new_client_name,onChange:t=>a("new_client_name",t.target.value)}),s.new_client_name&&e.jsx("p",{className:"text-red-500",children:s.new_client_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Client Phone"}),e.jsx("input",{type:"tel",required:!0,className:"w-full border p-2 rounded",placeholder:"e.g. +2 485 485 744",value:l.new_client_phone,onChange:t=>a("new_client_phone",t.target.value)}),s.new_client_phone&&e.jsx("p",{className:"text-red-500",children:s.new_client_phone})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block mb-1",children:"Email"}),e.jsx("input",{type:"email",className:"w-full border p-2 rounded",placeholder:"clientmail@domain.com",value:l.email,onChange:t=>a("email",t.target.value)}),s.email&&e.jsx("p",{className:"text-red-500",children:s.email})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Service"}),e.jsxs("select",{value:l.service,onChange:t=>a("service",t.target.value),className:"w-full border p-2 rounded dark:bg-gray-900",children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Hair Cut",children:"Hair Cut"}),e.jsx("option",{value:"Beard Shaping",children:"Beard Shaping"}),e.jsx("option",{value:"Other Services",children:"Other Services"})]}),s.service&&e.jsx("p",{className:"text-red-500",children:s.service})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Appointment Time"}),e.jsx("input",{type:"datetime-local",className:"w-full border p-2 rounded",value:l.start_time,onChange:t=>a("start_time",t.target.value)}),s.start_time&&e.jsx("p",{className:"text-red-500",children:s.start_time})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Duration"}),e.jsx("input",{type:"number",className:"w-full border p-2 rounded",placeholder:"30",value:l.duration,onChange:t=>a("duration",t.target.value)}),s.duration&&e.jsx("p",{className:"text-red-500",children:s.duration})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Status"}),e.jsxs("select",{value:l.status,onChange:t=>a("status",t.target.value),className:"w-full border p-2 rounded dark:bg-gray-900",children:[e.jsx("option",{value:"Scheduled",children:"Scheduled"}),e.jsx("option",{value:"Confirmed",children:"Confirmed"}),e.jsx("option",{value:"Canceled",children:"Canceled"})]}),s.status&&e.jsx("p",{className:"text-red-500",children:s.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Notes"}),e.jsx("textarea",{className:"w-full border p-2 rounded",value:l.notes,onChange:t=>a("notes",t.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-300 rounded hover:cursor-pointer dark:text-gray-900",onClick:()=>n(!1),children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-pink-600 text-white rounded",children:"Save Appointment"})]})]})]})})})]})}export{$ as default};
